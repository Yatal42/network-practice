# מדריך הרצה מפורט - פרויקט TCP/IP
## מטלה: בניית חבילות רשת משלך

---

## 📚 תוכן עניינים
1. [מה המטרה?](#מה-המטרה)
2. [התקנות - לפני שמתחילים](#התקנות)
3. [הכנת Cursor](#הכנת-cursor)
4. [הרצת המחברת צעד אחר צעד](#הרצת-המחברת)
5. [עבודה עם Wireshark](#עבודה-עם-wireshark)
6. [פתרון בעיות](#פתרון-בעיות)
7. [2 מחשבים - מתקדם](#2-מחשבים)

---

## 🎯 מה המטרה?

**במילים פשוטות:**
את כותבת רשימה של הודעות פשוטות בקובץ CSV (כמו Excel).
המחברת לוקחת כל הודעה, "אורזת" אותה לחבילת רשת אמיתית, ושולחת.
את צופה בחבילות ב-Wireshark ורואה איך ההודעות הפכו לחבילות.

**מה את תראי:**
- 400 הודעות מה-CSV
- הופכות ל-400 חבילות TCP/IP
- עם IP Headers, TCP Headers, והודעות
- הכל חי ב-Wireshark!

---

## 💻 התקנות - לפני שמתחילים

### ✅ שלב 1: התקן Python

1. גשי ל: https://www.python.org/downloads/
2. הורידי Python 3.11 או 3.12
3. **חשוב:** בהתקנה, סמני ✅ "Add Python to PATH"
4. בדיקה: פתחי CMD והקלידי:
   ```
   python --version
   ```
   אמור להופיע: Python 3.x.x

---

### ✅ שלב 2: התקן Wireshark + Npcap

**Wireshark:**
1. גשי ל: https://www.wireshark.org/download.html
2. הורידי את הגרסה ל-Windows
3. הריצי את ההתקנה

**Npcap (חשוב מאוד!):**
בזמן התקנת Wireshark, או אחרי:
1. גשי ל: https://npcap.com/#download
2. הורידי והתקיני
3. **וודאי שמסומנים:**
   - ✅ Install Npcap in WinPcap API-compatible mode
   - ✅ Support loopback traffic
4. אשרי והמתיני להתקנה

**בדיקה:**
- פתחי Wireshark
- אמורה להיות רשימה של ממשקים (Interfaces)
- חפשי "Adapter for loopback traffic capture" או "Npcap Loopback Adapter"

---

### ✅ שלב 3: התקן חבילות Python

**פתחי CMD כ-Administrator:**
1. לחצי Start
2. הקלידי "cmd"
3. לחצי ימני → "Run as administrator"

**הקלידי:**
```bash
pip install pandas scapy ipykernel jupyter
```

**מה התקנו?**
- `pandas` - לקריאת קובצי CSV
- `scapy` - לשליחת חבילות רשת על Windows
- `ipykernel` - כדי ש-Cursor יוכל להריץ מחברות Jupyter
- `jupyter` - לתמיכה במחברות

**בדיקה:**
```bash
python -c "import pandas, scapy; print('OK')"
```
אמור להדפיס: OK

---

### ✅ שלב 4: העתקת הפרויקט ל-Windows

1. העתיקי את כל התיקייה:
   ```
   network-practice/
   ├── my_traffic_400.csv
   ├── raw_tcp_ip_notebook_fallback_annotated-v1.ipynb
   └── tcpip_project_sample.csv
   ```

2. שימי בנתיב פשוט, למשל:
   ```
   C:\Users\שם_שלך\Desktop\network-practice\
   ```

---

## 🚀 הכנת Cursor

### ✅ שלב 5: הרץ Cursor כ-Administrator

**חשוב מאוד!** שליחת חבילות raw דורשת הרשאות.

**הגדרה קבועה:**
1. מצאי את קיצור הדרך של Cursor בשולחן העבודה או בתפריט Start
2. לחצי ימני → Properties
3. לשונית "Compatibility"
4. ✅ סמני: "Run this program as an administrator"
5. Apply → OK

**עכשיו פתחי את Cursor** - הוא יפתח עם הרשאות.

---

### ✅ שלב 6: פתחי את הפרויקט ב-Cursor

1. Cursor → File → Open Folder
2. בחרי את התיקייה `network-practice`
3. במעקב הקבצים, פתחי:
   ```
   raw_tcp_ip_notebook_fallback_annotated-v1.ipynb
   ```

---

### ✅ שלב 7: בחירת Kernel

כש-Cursor פותח את המחברת:

1. למעלה מימין תראי: **"Select Kernel"**
2. לחצי עליו
3. בחרי: **Python 3.x.x** (הגרסה שהתקנת)
4. אם שואל "Install ipykernel?" → Yes

אם הכל תקין, תראי למעלה: "Python 3.x.x" ✅

---

## 📖 הרצת המחברת צעד אחר צעד

### 🔴 חשוב: פתחי Wireshark לפני Cell 22!

---

### ▶️ Cell 3: טעינת קובץ CSV

**מה התא עושה?**
קורא את `my_traffic_400.csv` ונותן לך סטטיסטיקה.

**איך מריצים?**
לחצי על כפתור ▶️ ליד התא.

**מה אמור לצאת?**
```
טעינה הושלמה: 400 הודעות נטענו

עמודות בקובץ: ['msg_id', 'app_protocol', 'src_port', 'dst_port', 'message', 'timestamp']

5 שורות ראשונות:
   msg_id app_protocol  src_port  dst_port                   message  timestamp
0       1         HTTP     50001        80  GET /index.html HTTP/1.1      0.001
...
```

**✅ אם זה עובד - המשיכי!**
**❌ אם יש שגיאה - ראי "פתרון בעיות" בסוף**

---

### ▶️ Cell 5: בדיקת תקינות

**מה התא עושה?**
בודק שה-CSV מכיל את כל העמודות הנדרשות.

**איך מריצים?**
לחצי ▶️

**מה אמור לצאת?**
```
הצלחה! כל העמודות הנדרשות קיימות:
  ✓ app_protocol
  ✓ src_port
  ✓ dst_port
  ✓ message
  ✓ timestamp

הקובץ תקין ומוכן לשימוש!
```

---

### ▶️ Cell 7: טעינת ספריות

**מה התא עושה?**
טוען את הספריות: socket, struct, random, time, platform, scapy

**איך מריצים?**
לחצי ▶️

**מה אמור לצאת?**
```
(True, True)
```
זה אומר: Windows=True, Scapy קיים=True ✅

**❌ אם רואה (True, False):**
Scapy לא מותקן! חזרי לשלב 3 והתקיני:
```bash
pip install scapy
```

---

### ▶️ Cell 8, 9, 10: פונקציות בניית חבילות

**מה התאים האלה עושים?**
מגדירים פונקציות שבונות:
- `checksum()` - בדיקת תקינות
- `build_ip_header()` - IP Header (20 בתים)
- `build_tcp_header()` - TCP Header (20 בתים)

**איך מריצים?**
לחצי ▶️ על כל תא (8, 9, 10)

**מה אמור לצאת?**
כלום! הפונקציות רק מוגדרות, לא מודפסות.

---

### ▶️ Cell 12: מחלקת RawTcpTransport

**מה התא הזה עושה?**
מגדיר מחלקה ששולחת חבילות דרך Scapy על Windows.

**איך מריצים?**
לחצי ▶️

**מה אמור לצאת?**
כלום! זו רק הגדרת מחלקה.

---

### ▶️ Cell 13: רשימת ממשקי רשת

**מה התא הזה עושה?**
מראה לך את כל ממשקי הרשת שיש לך (WiFi, Ethernet, Loopback...)

**איך מריצים?**
לחצי ▶️

**מה אמור לצאת?**
רשימה של ממשקים, למשל:
```
Ethernet
Wi-Fi
Npcap Loopback Adapter
...
```

**📝 רשמי את השם של הממשק שבו תשלחי:**
- אם מחשב אחד (localhost): `Npcap Loopback Adapter`
- אם 2 מחשבים: `Ethernet` או `Wi-Fi`

---

### ▶️ Cell 14: תצוגה מקדימה

**מה התא הזה עושה?**
בונה חבילה לדוגמה ומציג אותה בהקס (כמו ב-Wireshark).

**איך מריצים?**
לחצי ▶️

**מה אמור לצאת?**
משהו כזה:
```
0000  45 00 00 3e ... [IP Header]
0010  7f 00 00 01 ... [TCP Header]
0020  48 65 6c 6c 6f ... [Hello Packet (preview)]
```

זה אומר שהפונקציות עובדות! ✅

---

### ▶️ Cell 17: הגדרות חיבור

**🔴 זה התא החשוב ביותר!**

**מה התא הזה עושה?**
מגדיר מי שולח למי - כתובות IP ופורטים.

**איך מריצים?**
לחצי ▶️

**מה תראי?**

**אם מחשב אחד (localhost):**
```
הגדרות חיבור:
  מחשב מקור: 127.0.0.1:50001
  מחשב יעד: 127.0.0.1:80
```

**אם 2 מחשבים:**
```
הגדרות חיבור:
  מחשב מקור: 192.168.1.10:50001
  מחשב יעד: 192.168.1.20:80
```

**⚙️ איך לשנות ל-localhost (מחשב אחד)?**
בתוך Cell 17, שני את זה:
```python
src_ip = '127.0.0.1'
dst_ip = '127.0.0.1'
```

ואז הריצי שוב ▶️

---

### 🔴 לפני Cell 22: פתחי Wireshark!

**חשוב מאוד!** תפתחי את Wireshark לפני שתשלחי חבילות.

---

## 📊 עבודה עם Wireshark

### ✅ שלב 8: הגדרת Wireshark

**פתיחת Wireshark:**
1. פתחי Wireshark (כ-Administrator!)
2. תראי רשימה של ממשקים

**בחירת ממשק:**

**אם מחשב אחד (localhost):**
- בחרי: **"Adapter for loopback traffic capture"** או **"Npcap Loopback Adapter"**

**אם 2 מחשבים:**
- בחרי את הממשק שמחובר לרשת (Ethernet/Wi-Fi)

**התחלת Capture:**
1. לחצי כפול על הממשק
2. Wireshark יתחיל לתפוס חבילות
3. **אל תעצרי!** תמשיכי למחברת

---

### ✅ שלב 9: סינון בWireshark

כדי לראות רק את החבילות שלך:

**אם localhost:**
```
tcp.port == 80
```

**אם 2 מחשבים (192.168.1.10 → 192.168.1.20):**
```
ip.src == 192.168.1.10 and ip.dst == 192.168.1.20
```

הכנסי את הסינון בשורה העליונה ולחצי Enter.

---

## 🚀 שליחת החבילות!

### ▶️ Cell 22: שליחת 400 ההודעות

**🔴 ודאי ש-Wireshark פועל לפני!**

**מה התא הזה עושה?**
עובר על כל 400 השורות ב-CSV, בונה חבילה לכל אחת, ושולח.

**איך מריצים?**
לחצי ▶️

**מה תראי ב-Cursor?**
```
מתחיל לשלוח 400 הודעות...
כל הודעה תישלח עם השהיה של 0.05 שניות

פתח את Wireshark ותתחיל להקליט לפני שתריץ את התא הזה!

נשלחו 50 מתוך 400 הודעות...
נשלחו 100 מתוך 400 הודעות...
נשלחו 150 מתוך 400 הודעות...
...
נשלחו 400 מתוך 400 הודעות...

✅ הסתיים! נשלחו 400 הודעות בהצלחה
עכשיו עצור את ההקלטה ב-Wireshark ושמור את הקובץ
```

**מה תראי ב-Wireshark?**
החבילות מתחילות להופיע! 🎉

כל חבילה תציג:
- Source: 192.168.1.10 (או 127.0.0.1)
- Destination: 192.168.1.20 (או 127.0.0.1)
- Protocol: TCP
- Info: הודעת ההודעה שלך!

---

### ✅ שלב 10: שמירת ה-Capture

**ב-Wireshark:**
1. לחצי על הריבוע האדום (Stop) למעלה
2. File → Save As
3. שם קובץ: `my_capture_400_packets.pcapng`
4. Save

**עכשיו יש לך קובץ עם כל 400 החבילות!** 🎉

---

### ✅ שלב 11: צילומי מסך

**מה לצלם?**

**צילום מסך 1: רשימת החבילות**
- הראי את הרשימה ב-Wireshark
- תראה 400 שורות (או הרבה שורות)
- זום על עמודות: Source, Destination, Protocol, Info

**צילום מסך 2: חבילה בודדת**
1. לחצי על חבילה אחת ברשימה
2. למטה תראי 3 חלונות:
   - Packet Details (פרטי החבילה)
   - Packet Bytes (ההקס)
3. הרחיבי את:
   - Internet Protocol Version 4
   - Transmission Control Protocol
   - Data
4. צלמי! זה יראה את השכבות

**צילום מסך 3: ההודעה עצמה**
1. לחצי על חבילה
2. למטה בחלון "Packet Bytes" תראי טקסט בצד ימין
3. תחפשי את ההודעה שלך (GET /index.html...)
4. צלמי!

**צילום מסך 4: סינון**
1. צלמי את שורת הסינון העליונה
2. תראה את הביטוי שהכנסת

---

## 🔧 פתרון בעיות

### ❌ בעיה: "No module named pandas"

**פתרון:**
```bash
pip install pandas
```

---

### ❌ בעיה: "No module named scapy"

**פתרון:**
```bash
pip install scapy
```

---

### ❌ בעיה: "Permission denied" בזמן שליחה

**פתרון:**
Cursor לא רץ כ-Administrator!
1. סגור את Cursor
2. לחצי ימני על Cursor → Run as Administrator
3. פתחי שוב את הפרויקט

---

### ❌ בעיה: "No such device" או "Cannot find adapter"

**פתרון:**
Npcap לא מותקן כראוי.
1. הורד שוב מ: https://npcap.com/
2. בהתקנה, ודאי:
   - ✅ WinPcap API-compatible mode
   - ✅ Support loopback traffic
3. אתחל את המחשב
4. נסי שוב

---

### ❌ בעיה: "Scapy not working" על Windows

**פתרון:**
1. ודאי ש-Npcap מותקן (לא WinPcap)
2. הריצי Python כ-Administrator:
   ```bash
   python -c "from scapy.all import conf; print(conf.ifaces)"
   ```
3. אם רואה רשימה - זה עובד!

---

### ❌ בעיה: לא רואה חבילות ב-Wireshark

**בדיקות:**
1. **ודאי שבחרת את הממשק הנכון:**
   - localhost → Loopback Adapter
   - 2 מחשבים → Ethernet/Wi-Fi

2. **בדקי סינון:**
   - נסי בלי סינון (מחקי את השורה)
   - אמורה לראות המון תעבורה

3. **חומת אש:**
   - Windows Firewall עשויה לחסום
   - הרצה כ-Administrator אמורה לפתור

---

## 🌐 2 מחשבים - מתקדם

### מתי צריך 2 מחשבים?

רק אם המטלה **דורשת במפורש** 2 מחשבים פיזיים.
אחרת, localhost מספיק לחלוטין!

---

### הגדרת 2 מחשבים

**מחשב 1 (שולח):**
- Windows עם Cursor
- הפרויקט מותקן
- Python, Scapy, Pandas

**מחשב 2 (מקבל):**
- כל מערכת הפעלה (Windows/Mac/Linux)
- רק Wireshark!

**חיבור לרשת:**
1. חבר שני המחשבים לאותו WiFi או Router
2. מצא את כתובות ה-IP:

**במחשב 1 (Windows):**
```bash
ipconfig
```
חפש: IPv4 Address (למשל: 192.168.1.10)

**במחשב 2:**
- Windows: `ipconfig`
- Mac/Linux: `ifconfig` או `ip addr`

חפש: IP Address (למשל: 192.168.1.20)

**בדיקת חיבור:**
במחשב 1:
```bash
ping 192.168.1.20
```
אמור לענות! אם לא - בדוק חומת אש.

---

### עדכון המחברת ל-2 מחשבים

**ב-Cell 17, שני:**
```python
src_ip = '192.168.1.10'  # ה-IP של מחשב 1
dst_ip = '192.168.1.20'  # ה-IP של מחשב 2
```

**שמור והרץ שוב את Cell 17.**

---

### הרצה עם 2 מחשבים

1. **במחשב 2:** פתח Wireshark
   - בחר את הממשק הנכון (Ethernet/Wi-Fi)
   - סנן: `ip.src == 192.168.1.10`
   - התחל Capture

2. **במחשב 1:** הרץ Cell 22
   - החבילות ייצאו לרשת

3. **במחשב 2:** תראה חבילות ב-Wireshark! 🎉

---

## 🎓 סיכום - רצף ההרצה המלא

### רשימת צ'ק:

**לפני:**
- [ ] Python מותקן
- [ ] Wireshark + Npcap מותקנים
- [ ] `pip install pandas scapy ipykernel jupyter`
- [ ] Cursor רץ כ-Administrator
- [ ] הפרויקט נפתח ב-Cursor

**הרצה:**
- [ ] ▶️ Cell 3: טעינת CSV
- [ ] ▶️ Cell 5: בדיקת תקינות
- [ ] ▶️ Cell 7: ספריות
- [ ] ▶️ Cell 8, 9, 10: פונקציות
- [ ] ▶️ Cell 12: RawTcpTransport
- [ ] ▶️ Cell 13: רשימת ממשקים (זכור את השם!)
- [ ] ▶️ Cell 14: תצוגה מקדימה
- [ ] ▶️ Cell 17: הגדרות חיבור
- [ ] 🔴 פתח Wireshark והתחל Capture
- [ ] ▶️ Cell 22: שלח 400 הודעות!
- [ ] 🛑 עצור Capture ב-Wireshark
- [ ] 💾 שמור קובץ PCAP
- [ ] 📸 צלם מסכים

**אחרי:**
- [ ] יש לך קובץ PCAP עם 400 חבילות
- [ ] יש לך צילומי מסך
- [ ] הבנת מה קרה!

---

## 🎉 מזל טוב!

אם הגעת עד לכאן - סיימת את הפרויקט בהצלחה!

עכשיו את יודעת:
- איך לקרוא CSV עם הודעות
- איך לבנות חבילות TCP/IP בפייתון
- איך לשלוח חבילות ברשת
- איך לצפות בהן ב-Wireshark
- איך רשתות עובדות מבפנים!

**זה ידע מאוד חשוב ברשתות!** 💪

---

**הוכן במיוחד עבור טל**
**בהצלחה במטלה! 🚀**

